"use strict";(self.webpackChunkcrm_ui=self.webpackChunkcrm_ui||[]).push([[973],{7973:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var a=t(2791),s=t(7913),r=t(9439),i=t(3501),o=t(1413),l=t(9650),c=t(3168),d=t(1889),u=t(493),h=t(4852),x=t(4554),m=t(890),p=t(217),Z=t(8902),f={id:0,name:"",address:"",city:"",sector:"",jobs:[],mapsCoord:{lat:51.509865,lng:-.118092}},j=t(3249),g=t(184),v=function(e){var n,t=e.company,a=e.isOpen,s=e.setIsOpen,r=(0,c.$)("pages",{keyPrefix:"companies.modal"}).t,i=(0,l.TA)({initialValues:t?(0,o.Z)({},t):(0,o.Z)({},f),onSubmit:function(){},enableReinitialize:!0});return(0,g.jsx)(Z.Z,{isOpen:a,setIsOpen:s,title:i.values.id?r("edit"):r("add"),saveFunction:function(){},children:(0,g.jsxs)(d.ZP,{container:!0,padding:2,spacing:2,children:[(0,g.jsx)(d.ZP,{xs:12,md:6,item:!0,children:(0,g.jsxs)(u.Z,{children:[(0,g.jsx)(h.ZP,{children:(0,g.jsx)(p.Z,{label:r("form.id"),type:"number",value:i.values.id,name:"id",onChange:i.handleChange,disabled:!0})}),(0,g.jsx)(h.ZP,{children:(0,g.jsx)(p.Z,{label:r("form.name"),type:"text",value:i.values.name,name:"name",onChange:i.handleChange})}),(0,g.jsx)(h.ZP,{children:(0,g.jsx)(p.Z,{label:r("form.address"),type:"text",value:i.values.address,name:"address",onChange:i.handleChange})}),(0,g.jsx)(h.ZP,{children:(0,g.jsx)(p.Z,{label:r("form.city"),type:"text",value:i.values.city,name:"city",onChange:i.handleChange})}),(0,g.jsx)(h.ZP,{children:(0,g.jsx)(p.Z,{label:r("form.sector"),type:"text",value:i.values.sector,name:"sector",onChange:i.handleChange})})]})}),(0,g.jsxs)(d.ZP,{item:!0,xs:12,md:6,children:[(0,g.jsxs)(x.Z,{m:1,children:[(0,g.jsx)(m.Z,{variant:"subtitle1",children:r("form.jobs")}),(0,g.jsx)(u.Z,{sx:{padding:1},children:i.values.jobs&&i.values.jobs.length>0?null===(n=i.values.jobs)||void 0===n?void 0:n.map((function(e,n){return(0,g.jsx)(h.ZP,{children:e.name},n)})):(0,g.jsx)(h.ZP,{children:"No Jobs"})})]}),(0,g.jsx)(j.Z,{mainCoords:i.values.mapsCoord,setCoord:function(e){i.setFieldValue("mapsCoord",e)},isMainMoving:!0})]})]})})},b=t(7823),C=function(){var e=(0,c.$)("pages",{keyPrefix:"companies.table"}).t,n=(0,a.useState)(!1),t=(0,r.Z)(n,2),s=t[0],o=t[1],l=(0,a.useState)(void 0),d=(0,r.Z)(l,2),u=d[0],h=d[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(v,{company:u,isOpen:s,setIsOpen:o}),(0,g.jsx)(b.Z,{data:i.Z,cellNames:[e("id"),e("name"),e("city")],keysToShow:["id","name","city"],setModalData:h,setIsDataModalOpen:o})]})},y=function(){return(0,a.useEffect)((function(){s.r.dispatch({type:"CHANGE_TITLE",payload:{title:"companies"}})})),(0,g.jsx)(C,{})}},8902:function(e,n,t){t.d(n,{Z:function(){return g}});var a=t(2791),s=t(9143),r=t(7621),i=t(9585),o=t(3400),l=t(9504),c=t(2363),d=t(4518),u=t(9598),h=t(920),x=t(3168),m=t(9439),p=t(5646),Z=t(9658),f=t(184),j=function(e){var n=e.open,t=e.setOpen,a=e.label;return(0,f.jsx)(p.Z,{open:n,autoHideDuration:6e3,onClose:function(){return t(!1)},children:(0,f.jsx)(Z.Z,{onClose:function(){return t(!1)},severity:"success",sx:{width:"100%"},children:a})})};var g=function(e){var n=e.isOpen,t=e.setIsOpen,p=e.title,Z=e.saveFunction,g=e.children,v=(0,x.$)("components",{keyPrefix:"actionModal"}).t,b=function(e){var n=(0,a.useState)(!1),t=(0,m.Z)(n,2),s=t[0],r=t[1];return{setOpen:r,snackbar:(0,f.jsx)(j,{open:s,setOpen:r,label:e})}}(v("success-snack-label")),C=b.setOpen,y=b.snackbar;return(0,f.jsxs)(f.Fragment,{children:[y,(0,f.jsx)(s.Z,{open:n,onClose:function(){return t(!1)},children:(0,f.jsxs)(r.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95%",height:"85%",bgcolor:"background.paper",border:"none"},children:[(0,f.jsx)(i.Z,{sx:{p:2,bgcolor:"success.dark",color:"white"},title:p,action:(0,f.jsx)(o.Z,{onClick:function(){t(!1)},children:(0,f.jsx)(u.Z,{htmlColor:"white"})})}),(0,f.jsx)(l.Z,{sx:{height:"76%",overflow:"auto"},children:g}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(d.Z,{sx:{border:"none !important",marginLeft:"auto"},startIcon:(0,f.jsx)(h.Z,{}),color:"success",variant:"contained",onClick:function(){t(!1),C(!0),Z()},children:v("save")})})]})})]})}},7823:function(e,n,t){t.d(n,{Z:function(){return E}});var a=t(3433),s=t(9439),r=t(1526),i=t(8087),o=t(9981),l=t(703),c=t(9281),d=t(9836),u=t(6890),h=t(5855),x=t(3994),m=t(4454),p=t(3382),Z=t(4518),f=t(6812),j=t(3767),g=t(2199),v=t(2791),b=t(3168),C=t(8769),y=t(9143),k=t(3400),P=t(890),w=t(6739),O=t(184),S=function(e){var n=e.open,t=e.setOpen,a=(0,b.$)("components",{keyPrefix:"crudTable.delete-modal"}).t;return(0,O.jsx)(y.Z,{open:n,onClose:function(){return t(!1)},children:(0,O.jsxs)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"none",pt:1,px:3,pb:3,display:"flex",flexDirection:"column"},children:[(0,O.jsx)(k.Z,{sx:{ml:"auto",mb:2},onClick:function(){return t(!1)},children:(0,O.jsx)(w.Z,{})}),(0,O.jsx)(P.Z,{children:a("are-you-sure")}),(0,O.jsxs)(j.Z,{direction:"row",justifyContent:"space-evenly",mt:2,children:[(0,O.jsx)(Z.Z,{variant:"outlined",color:"error",onClick:function(){return t(!1)},children:a("cancel")}),(0,O.jsx)(Z.Z,{variant:"contained",color:"error",onClick:function(){return t(!1)},children:a("delete")})]})]})})},F=t(1889),I=t(2167),M=t(7078),V=t(3466),B=function(e){var n=(0,b.$)("components",{keyPrefix:"searchInput"}).t,t=e.onChange;return(0,O.jsx)(M.Z,{type:"search",onChange:t,startAdornment:(0,O.jsx)(V.Z,{position:"start",children:(0,O.jsx)(I.Z,{})}),placeholder:n("placeholder"),sx:{width:"40em",mx:"auto"}})},T=t(4035),D=t(1413),$=t(7391),L=t(3501),A=t(8419),H=function(e){var n=e.search,t=e.setSearch;return(0,O.jsx)(F.ZP,{item:!0,xs:12,md:4,children:(0,O.jsxs)(j.Z,{direction:"row",children:[(0,O.jsx)(A.Z,{label:"Select Company",handleChange:function(e){var a=(0,D.Z)({},n);a.distance={company:{},value:0},a.distance.company=L.Z.filter((function(n){return n.id===e.target.value}))[0],t(a)},datas:L.Z,defaultValue:"Select Company",selectedValue:n.distance&&n.distance.company?n.distance.company.id:0,dataToValue:function(e){return"".concat(e.id," - ").concat(e.name)},getValue:function(e){return e.id}}),(0,O.jsx)($.Z,{label:"Distance",type:"number",name:"distance",value:n.distance?n.distance.value:0,disabled:!Boolean(!!n.distance&&n.distance.company),variant:"standard",margin:"dense",onChange:function(e){var a=(0,D.Z)({},n);a.distance.value=e.target.value,t(a)}})]})})},N=function(e){var n=e.isOpen,t=e.setIsOpen,a=e.filters,r=e.searchForm,i=(0,v.useState)(r.values.search),o=(0,s.Z)(i,2),c=o[0],d=o[1],u=(0,b.$)("components",{keyPrefix:"crudTable.advanced-search-modal"}).t;return(0,O.jsx)(y.Z,{open:n,onClose:function(){return t(!1)},children:(0,O.jsxs)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:"70%",minHeight:"60%",bgcolor:"background.paper",border:"none",padding:3,display:"flex",flexDirection:"column"},children:[(0,O.jsx)(j.Z,{mx:"auto",children:(0,O.jsx)(P.Z,{variant:"h5",component:"h6",children:u("title")})}),(0,O.jsxs)(F.ZP,{container:!0,display:"flex",width:"100%",textAlign:"center",children:[(0,O.jsx)(H,{search:c,setSearch:d}),a.map((function(e,n){return!Boolean(e.notVisible)&&(0,O.jsx)(F.ZP,{item:!0,xs:12,md:4,children:(0,O.jsx)($.Z,{label:e.label,type:"text",name:e.name,value:c[e.name]||"",variant:"standard",margin:"dense",onChange:function(n){var t=(0,D.Z)({},c);t[e.name]=n.target.value,d(t)}})},n)}))]}),(0,O.jsx)(j.Z,{mt:"auto",ml:"auto",children:(0,O.jsx)(Z.Z,{variant:"contained",onClick:function(){t(!1),r.setFieldValue("search",c),r.submitForm()},startIcon:(0,O.jsx)(I.Z,{}),children:u("search")})})]})})},z=function(e){var n=e.searchForm,t=e.filters,a=(0,v.useState)(""),r=(0,s.Z)(a,2),i=r[0],o=r[1],l=(0,v.useState)(!1),c=(0,s.Z)(l,2),d=c[0],u=c[1],h=(0,b.$)("components",{keyPrefix:"crudTable.search-bar"}).t;return(0,O.jsxs)(O.Fragment,{children:[Boolean(t)&&(0,O.jsx)(N,{isOpen:d,setIsOpen:u,searchForm:n,filters:t||[]}),(0,O.jsxs)(F.ZP,{container:!0,spacing:2,sx:{mr:"auto",width:"50%",ml:2,alignItems:"flex-end"},children:[(0,O.jsx)(F.ZP,{item:!0,xs:5,sx:{display:"flex"},children:(0,O.jsx)(B,{onChange:function(e){o(e.target.value)}})}),(0,O.jsx)(F.ZP,{item:!0,xs:2,children:(0,O.jsx)(Z.Z,{sx:{ml:"auto"},startIcon:(0,O.jsx)(I.Z,{}),onClick:function(){n.setFieldValue("search",{name:i}),n.submitForm()},children:h("search")})}),Boolean(t)&&(0,O.jsx)(F.ZP,{item:!0,xs:4,children:(0,O.jsx)(Z.Z,{sx:{ml:"auto"},startIcon:(0,O.jsx)(T.Z,{}),onClick:function(){u(!0)},children:h("advanced-search")})})]})]})},E=function(e){var n=e.data,t=e.cellNames,y=e.setModalData,k=e.keysToShow,P=e.setIsDataModalOpen,w=e.customDataComponent,F=e.searchForm,I=e.filters,M=w||[],V=(0,b.$)("components",{keyPrefix:"crudTable"}).t,B=(0,v.useState)(0),T=(0,s.Z)(B,2),D=T[0],$=T[1],L=(0,v.useState)(10),A=(0,s.Z)(L,2),H=A[0],N=A[1],E=(0,v.useState)([]),J=(0,s.Z)(E,2),R=J[0],_=J[1],q=(0,v.useState)(!1),W=(0,s.Z)(q,2),Y=W[0],G=W[1];return(0,O.jsxs)(l.Z,{sx:{width:"calc(100% - 40px)",marginLeft:"auto",overflow:"hidden",boxShadow:"none"},children:[(0,O.jsx)(S,{open:Y,setOpen:G}),Boolean(F)&&(0,O.jsx)(z,{searchForm:F,filters:I}),(0,O.jsx)(c.Z,{sx:{maxHeight:"500px"},children:(0,O.jsxs)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,O.jsx)(u.Z,{children:(0,O.jsxs)(h.Z,{children:[(0,O.jsx)(x.Z,{children:(0,O.jsx)(m.Z,{value:"all",checked:n.length===R.length,onChange:function(e){e.target.checked?_(n.map((function(e){return e.id}))):_([])}})}),t.map((function(e,n){return(0,O.jsx)(x.Z,{children:e},n)})),(0,O.jsx)(x.Z,{})]})}),(0,O.jsx)(p.Z,{children:n.length>0?n.slice(D*H,(D+1)*H).map((function(e,n){return(0,O.jsxs)(h.Z,{children:[(0,O.jsx)(x.Z,{children:(0,O.jsx)(m.Z,{value:e.id,checked:R.includes(e.id),onChange:function(n){if(n.target.checked){var t=(0,a.Z)(R);t.push(e.id),_(t)}else{var s=(0,a.Z)(R);s.splice(s.indexOf(e.id),1),_(s)}}})},n),k.map((function(n,t){return(0,O.jsx)(x.Z,{children:Object.keys(M).includes(n)?M[n](e[n]):n.includes(".")?(0,C.Z)(n,e):e[n]},t)})),(0,O.jsx)(x.Z,{children:(0,O.jsx)(Z.Z,{sx:{border:"none !important"},color:"warning",variant:"contained",onClick:function(){y(e),P(!0)},children:(0,O.jsx)(r.Z,{})})})]},n)})):(0,O.jsx)(h.Z,{children:(0,O.jsx)(x.Z,{colSpan:t.length+1,align:"center",children:V("no-data")})})})]})}),(0,O.jsx)(f.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:n.length,rowsPerPage:H,page:D,onPageChange:function(e,n){$(n)},onRowsPerPageChange:function(e){N(+e.target.value),$(0)}}),(0,O.jsx)(j.Z,{padding:1,children:(0,O.jsxs)(g.Z,{sx:{marginLeft:"auto"},"aria-label":"medium button group contained",variant:"contained",children:[(0,O.jsx)(Z.Z,{sx:{border:"none !important"},startIcon:(0,O.jsx)(i.Z,{}),color:"success",onClick:function(){y(void 0),P(!0)},children:V("add")}),(0,O.jsx)(Z.Z,{sx:{border:"none !important"},startIcon:(0,O.jsx)(o.Z,{}),color:"error",onClick:function(){G(!0)},children:V("delete")})]})})]})}},8419:function(e,n,t){var a=t(1413),s=t(8096),r=t(4925),i=t(7198),o=t(9891),l=(t(2791),t(184));n.Z=function(e){var n=e.label,t=e.handleChange,c=e.defaultValue,d=e.datas,u=e.dataToValue,h=e.selectedValue,x=e.disabled,m=(e.width,e.getValue),p=e.sx;return(0,l.jsxs)(s.Z,{variant:"standard",disabled:x,sx:(0,a.Z)({width:"100%",m:1},p),children:[(0,l.jsx)(r.Z,{children:n}),(0,l.jsxs)(i.Z,{value:h||0,label:n,onChange:t,children:[(0,l.jsx)(o.Z,{value:0,children:(0,l.jsx)("em",{children:c})}),d.map((function(e,n){return(0,l.jsx)(o.Z,{value:m(e),children:u(e)},n)}))]})]})}},217:function(e,n,t){t(2791);var a=t(8096),s=t(4925),r=t(7078),i=t(184);n.Z=function(e){var n=e.label,t=e.type,o=e.value,l=e.name,c=e.onChange,d=e.disabled;return(0,i.jsxs)(a.Z,{error:!Boolean(o),sx:{width:"100%",m:1},children:[(0,i.jsx)(s.Z,{htmlFor:l,children:n}),(0,i.jsx)(r.Z,{id:l,name:l,value:o,type:t,onChange:c,disabled:d})]})}},3249:function(e,n,t){t.d(n,{Z:function(){return Z}});var a=t(9439),s=t(2791),r=t(4052),i=t(8898),o=t(9763),l=t(1768),c=t(184),d=function(e){var n=e.position,t=e.callBackFn;(0,l.zV)({click:function(e){t(e.latlng)}});var a=(0,s.useRef)(null),r=(0,s.useMemo)((function(){return{dragend:function(){var e=a.current;null!=e&&t(e.getLatLng())}}}),[t]);return(0,c.jsx)(c.Fragment,{children:n&&(0,c.jsx)(o.J,{ref:a,eventHandlers:r,draggable:!0,position:n})})},u=t(7621),h=t(9585),x=t(9504),m=t(3168),p=t(6984),Z=function(e){var n=e.mainCoords,t=e.secondCoord,l=e.isMainMoving,Z=e.setCoord,f=(0,m.$)("components",{keyPrefix:"mapsInput"}).t,j=(0,s.useState)(t||n),g=(0,a.Z)(j,2),v=g[0],b=g[1],C=(0,s.useState)(0),y=(0,a.Z)(C,2),k=y[0],P=y[1];return(0,c.jsxs)(u.Z,{sx:{m:1},children:[!l&&(0,c.jsx)(h.Z,{title:"".concat(k," ").concat(f("title"))}),(0,c.jsx)(x.Z,{children:(0,c.jsxs)(r.h,{center:n,zoom:12,id:"map",style:{height:"400px",width:"100%",color:"black"},scrollWheelZoom:!1,children:[(0,c.jsx)(i.I,{attribution:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Boolean(n&&!l)&&(0,c.jsx)(o.J,{position:n}),(0,c.jsx)(d,{position:v,callBackFn:function(e){if(e){var t=(0,p.Z)(n,e);console.log(e,n,t),P(t.toFixed(3)),b(e),Z(e)}}})]})})]})}},6984:function(e,n,t){function a(e,n){var t=s(n.lat-e.lat),a=s(n.lng-e.lng),r=s(e.lat),i=s(n.lat),o=Math.sin(t/2)*Math.sin(t/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(r)*Math.cos(i);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function s(e){return e*Math.PI/180}t.d(n,{Z:function(){return a}})},8769:function(e,n,t){function a(e,n){return e.split(".").reduce((function(e,n){return e?e[n]:null}),n)}t.d(n,{Z:function(){return a}})},3501:function(e,n){n.Z=[{id:1,name:"Company Ankara",city:"Ankara",mapsCoord:{lat:39.925533,lng:32.866287}},{id:2,name:"Company Paris",city:"Paris",mapsCoord:{lat:48.864716,lng:2.349014}},{id:3,name:"Company London",city:"London",mapsCoord:{lat:51.509865,lng:-.118092}},{id:4,name:"Company New York",city:"New York",mapsCoord:{lat:40.73061,lng:-73.935242}},{id:5,name:"Company Berlin",city:"Berlin",mapsCoord:{lat:52.520008,lng:13.404954}}]}}]);
//# sourceMappingURL=973.bca3c78c.chunk.js.map