"use strict";(self.webpackChunkcrm_ui=self.webpackChunkcrm_ui||[]).push([[590],{7590:function(e,a,n){n.r(a),n.d(a,{default:function(){return ce}});var t=n(2791),s=n(7913),i=n(9439),l=n(3912),r=n(3433),o=n(1413),d=n(1889),c=n(3767),u=n(4518),m=n(9650),p={id:0,name:"",surname:"",CVAddress:"",phoneNumbers:[],emailAdresses:[],address:"",extraAddress:"",zipCode:"",city:"",country:"",mapsCoord:void 0,creatorMember:{},previousJobs:[],skills:[],comment:"",salaryExpectation:0,departments:[],keywords:[],diplomas:[],placedJob:void 0,situation:!1},x=n(217),h=n(920),f=n(8068),Z=n(3200),v=n(5073),j=n(7621),y=n(9585),g=n(9504),b=n(2363),k=n(7391),C=n(3466),E=n(3400),S=n(5370),w=n(8087),M=n(184),T=function(e){var a=e.label,n=e.id,s=e.data,l=e.addNew,o=e.deleteItem,c=(0,t.useState)(Array(s.length).fill(0)),m=(0,i.Z)(c,2),p=m[0],x=m[1],h=(0,t.useState)(""),f=(0,i.Z)(h,2),Z=f[0],v=f[1];return(0,M.jsxs)(j.Z,{sx:{border:"none",width:"100%",m:1},children:[(0,M.jsx)(y.Z,{title:a}),(0,M.jsx)(g.Z,{children:(0,M.jsx)(d.ZP,{container:!0,spacing:2,mx:"auto",children:s.length>0?s.map((function(e,a){return(0,M.jsx)(d.ZP,{item:!0,xs:12,children:(0,M.jsx)(u.Z,{variant:"outlined",color:p[a]?"error":"inherit",sx:{width:"100%"},onMouseOut:function(){var e=(0,r.Z)(p);e[a]=0,x(e)},onMouseOver:function(){var e=(0,r.Z)(p);e[a]=1,x(e)},onClick:function(){o(a)},children:p[a]?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(S.Z,{})," Delete"]}):e},a)},a)})):"No data"})}),(0,M.jsx)(b.Z,{children:(0,M.jsx)(k.Z,{label:"",id:n,value:Z,onChange:function(e){return v(e.target.value)},onKeyUpCapture:function(e){13===e.which&&(l(Z),v(""))},sx:{marginLeft:"auto",width:"100%"},InputProps:{endAdornment:(0,M.jsx)(C.Z,{position:"end",children:(0,M.jsx)(E.Z,{onClick:function(){l(Z),v("")},children:(0,M.jsx)(w.Z,{})})})},variant:"standard"})})]})},F=n(3249),I=n(8902),O=n(3168),P=n(6809),V=n(8820),J=n(8940),A=n(9143),z=n(4554),H=n(5683),q=function(e){var a=e.isOpen,n=e.setIsOpen,t=e.addSkill,s=e.editSkill,i=e.action,l=e.modalSkill,r=e.setModalSkill,d=(0,O.$)("pages",{keyPrefix:"candidates.modal.form.skills"}).t;return(0,M.jsx)(A.Z,{open:a,onClose:function(){n(!1)},children:(0,M.jsxs)(z.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",bgcolor:"background.paper",border:"none",padding:2},children:[(0,M.jsx)(x.Z,{label:d("name"),type:"text",value:l.name,name:"skill-name",onChange:function(e){var a=(0,o.Z)({},l);a.name=e.target.value,r(a)}}),(0,M.jsx)(x.Z,{label:d("skill-level"),type:"text",value:l.level,name:"skill-level",onChange:function(e){var a=(0,o.Z)({},l);a.level=e.target.value,r(a)}}),(0,M.jsxs)(u.Z,{variant:"contained",color:"success",onClick:function(){"add"===i?t(l):s(l),n(!1)},children:[(0,M.jsx)(H.Z,{sx:{mr:1}}),d("save-skill")]})]})})},R=function(e){var a=(0,O.$)("pages",{keyPrefix:"candidates.modal.form.skills"}).t,n=e.skills,s=e.removeSkill,l=e.editSkill,r=e.addSkill,o=(0,t.useState)(!1),c=(0,i.Z)(o,2),m=c[0],p=c[1],x=(0,t.useState)("add"),h=(0,i.Z)(x,2),f=h[0],Z=h[1],v=(0,t.useState)({id:0,name:"",level:""}),k=(0,i.Z)(v,2),C=k[0],S=k[1];return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(q,{isOpen:m,setIsOpen:p,addSkill:r,editSkill:l,action:f,modalSkill:C,setModalSkill:S}),(0,M.jsxs)(j.Z,{sx:{border:"none",width:"100%",m:1},children:[(0,M.jsx)(y.Z,{title:a("title")}),(0,M.jsx)(g.Z,{children:(0,M.jsx)(d.ZP,{container:!0,children:n.map((function(e,n){return(0,M.jsxs)(d.ZP,{item:!0,xs:12,sx:{display:"flex"},children:[(0,M.jsx)(P.Z,{title:a("level")+e.level,placement:"top",children:(0,M.jsx)("span",{children:e.name})}),(0,M.jsx)(E.Z,{sx:{ml:"auto"},onClick:function(){Z("edit"),S(e),p(!0)},children:(0,M.jsx)(V.Z,{})}),(0,M.jsx)(E.Z,{sx:{ml:1},onClick:function(){s(e)},children:(0,M.jsx)(J.Z,{})})]},n)}))})}),(0,M.jsx)(b.Z,{children:(0,M.jsx)(u.Z,{onClick:function(){Z("add"),S({id:0,name:"",level:""}),p(!0)},children:a("add-new-skill")})})]})]})},N=n(703),L=n(8096),Y=n(4925),$=n(7198),B=n(9891),D=n(890),_={sms:[{id:1,name:"SMS Template 1",template:"Hello %name%. This message is sent by template 1. You can add other properties like: %city%, %country%, %requestedJob.name%"},{id:2,name:"SMS Template 2",template:"Hello %name%. This message is sent by template 1. You can add other properties like: %city%, %country%, %requestedJob.name%"},{id:3,name:"SMS Template 3",template:"Hello %name%. This message is sent by template 1. You can add other properties like: %city%, %country%, %requestedJob.name%"}],email:[{id:1,name:"E-Mail Template 1",template:"Hello %name%. This message is sent by template 1. You can add other properties like: %city%, %country%, %requestedJob.name%"},{id:2,name:"E-Mail Template 2",template:"Hello %name%. This message is sent by template 1. You can add other properties like: %city%, %country%, %requestedJob.name%"},{id:3,name:"E-Mail Template 3",template:"Hello %name%. This message is sent by template 1. You can add other properties like: %city%, %country%, %requestedJob.name%"}]},W=n(6739),G=n(148),K=n(8769),U=function(e){var a=e.isOpen,n=e.setIsOpen,s=e.messageType,l=e.candidate,r=(0,t.useState)({id:0,name:"",template:""}),o=(0,i.Z)(r,2),d=o[0],m=o[1],p=(0,O.$)("pages",{keyPrefix:"candidates.modal.send-message"}).t;return(0,M.jsx)(A.Z,{open:a,onClose:function(){m({id:0,name:"",template:""}),n(!1)},children:(0,M.jsxs)(N.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"60%",height:"55%",bgcolor:"background.paper",border:"none",padding:2},children:[(0,M.jsx)(c.Z,{mb:5,children:(0,M.jsx)(E.Z,{sx:{ml:"auto"},onClick:function(){m({id:0,name:"",template:""}),n(!1)},children:(0,M.jsx)(W.Z,{})})}),(0,M.jsxs)(L.Z,{fullWidth:!0,children:[(0,M.jsx)(Y.Z,{id:"select-temp-label",children:p("template")}),(0,M.jsxs)($.Z,{value:d.id,labelId:"select-temp-label",id:"select-temp",label:"Template",onChange:function(e){m(e.target.value?_[s].filter((function(a){return a.id===e.target.value}))[0]:{id:0,name:"",template:""})},children:[(0,M.jsxs)(B.Z,{value:0,children:[" ",p("select-template")," "]}),_[s].map((function(e,a){return(0,M.jsx)(B.Z,{value:e.id,children:e.name},a)}))]})]}),Boolean(d.id)&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(j.Z,{sx:{mt:3},children:[(0,M.jsx)(y.Z,{title:d.name}),(0,M.jsx)(g.Z,{sx:{lineHeight:2},children:d.template.split(/%(\w+|\w+.\w+)%/g).map((function(e,a){return a%2===0?e:(0,M.jsx)(D.Z,{variant:"subtitle2",component:"span",color:"white",sx:{backgroundColor:"error.main",borderRadius:"3px",padding:.3,mx:1,display:"inline-block"},children:(0,K.Z)(e,l)})}))})]}),(0,M.jsx)(c.Z,{mt:3,children:(0,M.jsx)(u.Z,{endIcon:(0,M.jsx)(G.Z,{}),sx:{ml:"auto"},variant:"contained",color:"primary",onClick:function(){m({id:0,name:"",template:""}),n(!1)},children:p("send")})})]})]})})},Q=n(8419),X=n(8974),ee=n(318),ae=n(5523),ne=n(9955),te=function(e){var a=e.label;return(0,M.jsx)(ae.Z,{value:"start",control:(0,M.jsx)(ne.Z,(0,o.Z)((0,o.Z)({},e),{},{checkedIcon:(0,M.jsx)(ee.Z,{sx:{backgroundColor:"success.main",color:"white",borderRadius:"50%"}}),icon:(0,M.jsx)(W.Z,{sx:{backgroundColor:"error.main",color:"white",borderRadius:"50%"}})})),label:a,labelPlacement:"start"})},se=["phoneNumbers","emailAdresses","previousJobs","departments","keywords","diplomas"],ie=function(e){var a=e.candidate,n=e.isOpen,s=e.setIsOpen,l=(0,O.$)("pages",{keyPrefix:"candidates.modal"}).t,j=(0,m.TA)({initialValues:a?(0,o.Z)({},a):(0,o.Z)({},p),onSubmit:function(){},enableReinitialize:!0}),y=(0,t.useState)(!1),g=(0,i.Z)(y,2),b=g[0],k=g[1],C=(0,t.useState)("sms"),E=(0,i.Z)(C,2),S=E[0],w=E[1];return(0,M.jsxs)(I.Z,{isOpen:n,setIsOpen:s,title:j.values.id?l("edit"):l("add"),saveFunction:function(){},children:[(0,M.jsx)(U,{isOpen:b,setIsOpen:k,candidate:j.values,messageType:S}),(0,M.jsxs)(d.ZP,{container:!0,spacing:2,padding:2,children:[(0,M.jsxs)(d.ZP,{item:!0,xs:12,md:4,children:[(0,M.jsx)(x.Z,{label:l("form.id"),type:"number",value:j.values.id,name:"id",onChange:j.handleChange,disabled:!0}),(0,M.jsx)(x.Z,{label:l("form.name"),type:"text",value:j.values.name,name:"name",onChange:j.handleChange}),(0,M.jsx)(x.Z,{label:l("form.surname"),type:"text",value:j.values.surname,name:"surname",onChange:j.handleChange}),(0,M.jsx)(x.Z,{label:l("form.address"),type:"text",value:j.values.address,name:"address",onChange:j.handleChange}),(0,M.jsx)(x.Z,{label:l("form.extraAddress"),type:"text",value:j.values.extraAddress,name:"extraAddress",onChange:j.handleChange}),(0,M.jsx)(x.Z,{label:l("form.zipCode"),type:"text",value:j.values.zipCode,name:"zipCode",onChange:j.handleChange}),(0,M.jsx)(x.Z,{label:l("form.city"),type:"text",value:j.values.city,name:"city",onChange:j.handleChange}),(0,M.jsx)(x.Z,{label:l("form.country"),type:"text",value:j.values.country,name:"country",onChange:j.handleChange}),(0,M.jsx)(x.Z,{label:l("form.comment"),type:"text",value:j.values.comment,name:"comment",onChange:j.handleChange}),(0,M.jsx)(x.Z,{label:l("form.salaryExpectation"),type:"number",value:j.values.salaryExpectation,name:"salaryExpectation",onChange:j.handleChange}),(0,M.jsx)(te,{disableRipple:!0,color:"success",checked:j.values.situation,onChange:function(){j.setFieldValue("situation",!j.values.situation)},label:l("form.situation").toString()}),j.values.situation&&(0,M.jsx)(Q.Z,{label:l("form.placed-job"),handleChange:function(e){j.setFieldValue("placedJob",X.Z.filter((function(a){return a.id===e.target.value}))[0])},datas:X.Z,defaultValue:l("form.placed-job"),selectedValue:j.values.placedJob?j.values.placedJob.id:0,dataToValue:function(e){return"".concat(e.id," - ").concat(e.name)},getValue:function(e){return e.id}}),(0,M.jsx)(R,{skills:j.values.skills||[],addSkill:function(e){var a=j.values.skills?(0,r.Z)(j.values.skills):[];a.push(e),j.setFieldValue("skills",a)},editSkill:function(e){var a=j.values.skills?(0,r.Z)(j.values.skills):[];(a=a.filter((function(a){return a.id!==e.id}))).push(e),j.setFieldValue("skills",a)},removeSkill:function(e){var a=j.values.skills?(0,r.Z)(j.values.skills):[];a=a.filter((function(a){return a.id!==e.id})),j.setFieldValue("skills",a)}})]}),(0,M.jsx)(d.ZP,{item:!0,xs:12,md:4,children:se.map((function(e,a){return(0,M.jsx)(T,{label:l("form."+e),id:e,data:j.values[e],addNew:function(a){!function(e,a){var n=j.values[a];n.push(e),j.setFieldValue(a,n)}(a,e)},deleteItem:function(a){!function(e,a){var n=j.values[a];n.splice(e,1),j.setFieldValue(a,n)}(a,e)}},a)}))}),(0,M.jsxs)(d.ZP,{item:!0,xs:12,md:4,children:[(0,M.jsx)(F.Z,{mainCoords:j.values.mapsCoord,isMainMoving:!0,setCoord:function(e){j.setFieldValue("mapsCoord",e)}}),j.values.id?(0,M.jsxs)(c.Z,{sx:{m:1},direction:"row",spacing:1,children:[(0,M.jsxs)(u.Z,{variant:"contained",color:"success",children:[(0,M.jsx)(h.Z,{})," ",l("form.cv.download")]}),(0,M.jsxs)(u.Z,{variant:"contained",color:"secondary",children:[(0,M.jsx)(f.Z,{})," ",l("form.cv.upload-new")]})]}):(0,M.jsxs)(u.Z,{sx:{m:1},variant:"contained",color:"secondary",children:[(0,M.jsx)(f.Z,{})," ",l("form.cv.upload")]}),Boolean(j.values.id)&&(0,M.jsxs)(c.Z,{sx:{m:1},direction:"row",spacing:1,children:[(0,M.jsxs)(u.Z,{variant:"contained",color:"primary",onClick:function(){w("email"),k(!0)},children:[(0,M.jsx)(Z.Z,{sx:{mr:1}})," ",l("send-mail")]}),(0,M.jsxs)(u.Z,{variant:"contained",color:"primary",onClick:function(){w("sms"),k(!0)},children:[(0,M.jsx)(v.Z,{sx:{mr:1}})," ",l("send-sms")]})]})]})]})]})},le=n(7823),re=n(6984),oe=n(2883),de=function(){var e=(0,O.$)("pages",{keyPrefix:"candidates.table"}).t,a=(0,t.useState)(!1),n=(0,i.Z)(a,2),s=n[0],r=n[1],o=(0,t.useState)(void 0),d=(0,i.Z)(o,2),c=d[0],u=d[1],p=(0,t.useState)(l.Z),x=(0,i.Z)(p,2),h=x[0],f=x[1],Z=(0,m.TA)({initialValues:{search:{}},onSubmit:function(e){var a=Object.keys(e.search).reduce((function(a,n){var t=v.filter((function(e){return e.name===n}))[0]?v.filter((function(e){return e.name===n}))[0].filterFunc:void 0;if(t)return a.filter(t);var s=new RegExp(".*"+e.search[n].toLowerCase()+".*");return a.filter((function(e){return!!e[n]&&s.test(e[n].toLowerCase())}))}),l.Z);f(a)},enableReinitialize:!0}),v=[{name:"distance",label:e("search-filters.distance"),notVisible:!0,filterFunc:function(e){return(0,re.Z)(Z.values.search.distance.company.mapsCoord,e.mapsCoord)<Z.values.search.distance.value}},{name:"diploma",label:e("search-filters.diploma")},{name:"keywords",label:e("search-filters.keywords")}];return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(t.Suspense,{fallback:(0,M.jsx)(oe.Z,{}),children:(0,M.jsx)(ie,{candidate:c,isOpen:s,setIsOpen:r})}),(0,M.jsx)(le.Z,{data:h,cellNames:[e("id"),e("name"),e("surname"),e("city")],keysToShow:["id","name","surname","city"],setModalData:u,setIsDataModalOpen:r,searchForm:Z,filters:v})]})},ce=function(){return(0,t.useEffect)((function(){s.r.dispatch({type:"CHANGE_TITLE",payload:{title:"candidates"}})})),(0,M.jsx)(de,{})}},3249:function(e,a,n){n.d(a,{Z:function(){return f}});var t=n(9439),s=n(2791),i=n(4052),l=n(8898),r=n(9763),o=n(1768),d=n(184),c=function(e){var a=e.position,n=e.callBackFn;(0,o.zV)({click:function(e){n(e.latlng)}});var t=(0,s.useRef)(null),i=(0,s.useMemo)((function(){return{dragend:function(){var e=t.current;null!=e&&n(e.getLatLng())}}}),[n]);return(0,d.jsx)(d.Fragment,{children:a&&(0,d.jsx)(r.J,{ref:t,eventHandlers:i,draggable:!0,position:a})})},u=n(7621),m=n(9585),p=n(9504),x=n(3168),h=n(6984),f=function(e){var a=e.mainCoords,n=e.secondCoord,o=e.isMainMoving,f=e.setCoord,Z=(0,x.$)("components",{keyPrefix:"mapsInput"}).t,v=(0,s.useState)(n||a),j=(0,t.Z)(v,2),y=j[0],g=j[1],b=(0,s.useState)(0),k=(0,t.Z)(b,2),C=k[0],E=k[1];return(0,d.jsxs)(u.Z,{sx:{m:1},children:[!o&&(0,d.jsx)(m.Z,{title:"".concat(C," ").concat(Z("title"))}),(0,d.jsx)(p.Z,{children:(0,d.jsxs)(i.h,{center:a,zoom:12,id:"map",style:{height:"400px",width:"100%",color:"black"},scrollWheelZoom:!1,children:[(0,d.jsx)(l.I,{attribution:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Boolean(a&&!o)&&(0,d.jsx)(r.J,{position:a}),(0,d.jsx)(c,{position:y,callBackFn:function(e){if(e){var n=(0,h.Z)(a,e);console.log(e,a,n),E(n.toFixed(3)),g(e),f(e)}}})]})})]})}},6984:function(e,a,n){function t(e,a){var n=s(a.lat-e.lat),t=s(a.lng-e.lng),i=s(e.lat),l=s(a.lat),r=Math.sin(n/2)*Math.sin(n/2)+Math.sin(t/2)*Math.sin(t/2)*Math.cos(i)*Math.cos(l);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}function s(e){return e*Math.PI/180}n.d(a,{Z:function(){return t}})},8974:function(e,a){a.Z=[{id:1,name:"Example",experience:5,salaryExpectation:5e3},{id:2,name:"Example",experience:5,salaryExpectation:5e3},{id:3,name:"Example",experience:5,salaryExpectation:5e3},{id:4,name:"Example",experience:5,salaryExpectation:5e3},{id:5,name:"Example",experience:5,salaryExpectation:5e3},{id:6,name:"Example",experience:5,salaryExpectation:5e3},{id:7,name:"Example",experience:5,salaryExpectation:5e3},{id:8,name:"Example",experience:5,salaryExpectation:5e3},{id:9,name:"Example",experience:5,salaryExpectation:5e3},{id:10,name:"Example",experience:5,salaryExpectation:5e3},{id:11,name:"Example",experience:5,salaryExpectation:5e3},{id:12,name:"Example",experience:5,salaryExpectation:5e3},{id:13,name:"Example",experience:5,salaryExpectation:5e3},{id:14,name:"Example",experience:5,salaryExpectation:5e3},{id:15,name:"Example",experience:5,salaryExpectation:5e3},{id:16,name:"Example",experience:5,salaryExpectation:5e3},{id:17,name:"Example",experience:5,salaryExpectation:5e3},{id:18,name:"Example",experience:5,salaryExpectation:5e3},{id:19,name:"Example",experience:5,salaryExpectation:5e3}]}}]);
//# sourceMappingURL=590.00ec08b7.chunk.js.map